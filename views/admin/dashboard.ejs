<%- include('../partials/header') %>

<div class="container mt-4">

    <h1 class="mb-4">Dashboard - Lanchonete</h1>

    <section class="row g-4">

        <div class="col-md-3">
            <div class="card shadow p-3 text-center">
                <h2>Usu√°rios</h2>
                <p class="display-6"><%= totalUsuarios %></p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow p-3 text-center">
                <h2>Lanches</h2>
                <p class="display-6"><%= totalLanches %></p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow p-3 text-center">
                <h2>Pedidos</h2>
                <p class="display-6"><%= totalPedidos %></p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow p-3 text-center">
                <h2>Total vendido</h2>
                <p class="display-6">R$ <%= totalVendido.toFixed(2) %></p>
            </div>
        </div>

    </section>

    <hr>

    <h2 class="mt-4">√öltimos pedidos</h2>

    <div class="table-responsive">
        <table class="table table-striped table-hover mt-3">
            <thead class="table-success">
                <tr>
                    <th>Usu√°rio</th>
                    <th>Itens</th>
                    <th>Total</th>
                </tr>
            </thead>

            <tbody>
                <% ultimosPedidos.forEach(p => { %>
                    <tr>
                        <td><%= p.usuario ? p.usuario.nome : "Usu√°rio removido" %></td>

                        <td>
                            <% p.itens.forEach(i => { %>
                                <div>
                                    ‚Ä¢ <%= i.lanche ? i.lanche.nome : "Lanche removido" %> (x<%= i.quantidade %>)
                                </div>
                            <% }) %>
                        </td>

                        <td>R$ <%= p.total.toFixed(2) %></td>

                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>

    <hr>

    <h2 class="mt-4">Atalhos r√°pidos</h2>

    <div class="d-flex flex-wrap gap-3 mt-3">

        <a href="/lanche/add" class="btn btn-success">‚ûï Adicionar Lanche</a>
        <a href="/usuario/add" class="btn btn-success">üë§ Adicionar Usu√°rio</a>
        <a href="/lanche" class="btn btn-outline-success">üçî Listar Lanches</a>
        <a href="/usuario" class="btn btn-outline-success">üìã Listar Usu√°rios</a>
        <a href="/pedido/lst" class="btn btn-outline-success">üõí Ver Pedidos</a>

    </div>

</div>

<%- include('../partials/footer') %>
